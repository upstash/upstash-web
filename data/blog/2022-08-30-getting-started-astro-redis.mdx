---
slug: getting-started-astro-redis
title: "Get Started with Astro and Redis"
description: "Getting started with Astro and Redis: quick start tutorial building a notes app with serverless Upstash data and Cloudflare workers."
tags: [redis, astro, cloudflare, serverless]
authors:
  - rodney
---

Astro is a new tool optimized for building **fast** content sites. Although it is new, the team has already released version 1.0 and the APIs are now stable. Key selling points are **zero JavaScript** by default as well as &ldquo;bring your own framework&rdquo;. We will use Svelte here to help us get started with Astro and Redis. We are building a basic notes app with a serverless database. Although we use Svelte, you should be able to follow along without prior Svelte knowledge. That said, you can swap the components out for <a aria-label="Open list of Astro-supported frameworks" href="https://astro.build/integrations/frameworks/">React, Vue, or other supported frameworks</a> later, if you prefer.

We will lean heavily on browser APIs and, in fact, only ship JavaScript in a single component. We are going to host the app on Cloudflare and use Workers, but we will get into that later.

To get started with Astro and Redis, clone the starter code template locally:

```shell
pnpm create astro -- --template rodneylab/upstash-astro
```

When prompted, accept the installation of dependencies and the initialization of a git repo. Pick the recommended TypeScript option. Change directories into your new project folder. There is no framework support by default, and we add an integration to be able to use Svelte:

```shell
pnpm astro add svelte
```

Svelte setup is automatic if you **choose the default options** from the prompts. Next, to spin up the dev server, run the `pnpm dev` command. The CLI will give you the URL (something like http://localhost:3000). Open the URL in your browser.

![Get started with Astro and Redis: Screen capture shows the title Upstash Astro Notes, with an empty view below where notes will go](/blog/astro/upstash-astro-initial.png "Initial Screenshot")

## Astro Routing

Let's take a look at `src/pages/index.astro`. This is the Astro markup for the home page at `http://localhost:3000/`. Astro uses **file-based routing**. That means the Astro files we create in the `src/pages` directory get output to HTML pages with matching paths. We will also write an **API endpoint** in **TypeScript** at `src/pages/api.ts`. API files also follow the file-based routing pattern so we will access that endpoint at `http://localhost:3000/api`.

You might notice we have a favicon in the browser but there is no `link` tag in the `index.astro` markup. That is because we are using the layout file at `src/layouts/Layout.astro`. In `index.astro`, we wrap our page's main content in the `Layout` component. This pattern saves us from repeating layout code in larger projects.

In the `src/components` folder, we have our Svelte components. We will be able to import these into `index.astro` just like we did with the Layout component.

## Get Started with Astro and Redis: Astro Files

Astro files have two parts. The first, **script**, part is where we can add any JavaScript or TypeScript logic. We wrap this section in &ldquo;`---`&rdquo; delimiters. The second part is the **template** and looks a lot like HTML. It will be familiar if you already know JSX.

Some modern Astro features include:

- out-of-the-box **TypeScript** support,
- [**partial hydration**](https://www.patterns.dev/posts/islands-architecture/), and
- **top-level await** (within `.astro` files).

### Initial Notes

Let us define some notes in the script section of `index.astro` and then pass them to a Svelte component in the template section.

Update the code in `src/pages/index.astro` (you can leave the `style` tag at the bottom as it is throughout this tutorial):

```html
---
import HeadingBar from '~components/HeadingBar.svelte';
import NoteBody from '~components/NoteBody.svelte';
import NotesList from '~components/NotesList.svelte';
import Layout from '~layouts/Layout.astro';
import type { Note } from '~types/note';

const editMode = false;

const notes: Note[] = [
	{
		id: '1',
		title: 'Very first note',
		text: 'First noteâs text',
		modified: new Date().toISOString(),
	},
	{
		id: '2',
		title: 'Another note',
		text: 'This noteâs text',
		modified: new Date().toISOString(),
	},
];
const selectedNote = notes[0];

const title = 'Upstash Astro Notes';
---

<Layout title="{title}">
  <main class="wrapper">
    <h1>{title}</h1>
    <div class="container">
      <header class="heading">
        {selectedNote ? <HeadingBar note="{selectedNote}" {editMode} /> : null}
      </header>
      <aside class="list">
        <NotesList
          client:load
          {notes}
          selectedId="{selectedNote?.id}"
          {editMode}
        />
      </aside
