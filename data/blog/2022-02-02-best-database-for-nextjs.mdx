---
slug: best-database-for-nextjs
title: "Best Databases for Next.js"
image: nextjsdbs/cover.jpg
authors: [enes]
tags:
  [
    redis,
    database,
    serverless,
    aws,
    mongodb,
    planetscale,
    supabase,
    faunadb,
    upstash,
    dynamodb,
  ]
---

Next.js enables developers to build full-stack applications with Server Side Rendering capability. Vercel and Netlify help them write the backend API with serverless functions. So the next question is, what is the ideal database for Next.js apps? In this post, I will review the databases that are popular among the Next.js community. I will comment on how they fit the serverless model. Two things to check:

- Serverless pricing: Is the price pay-per-use? When the database is not in use, do you still have to pay?
- Serverless connections: Is there support for HTTP-based connections? So there should not be any connection problems that are common with serverless functions.

## TLDR

I have reviewed PlanetScale, Supabase, Upstash, Fauna, DynamoDB, and MongoDB Atlas. Check the table below to compare the feature set of each product.

<FullWidth>

| Feature             | PlanetScale        | Supabase         | Upstash         | Fauna        | DynamoDB       | MongoDB Atlas  |
|---------------------|---------------------|------------------|-----------------|--------------|----------------|----------------|
| API                 | MySQL               | PostgreSQL       | Redis           | Fauna        | DynamoDB       | MongoDB        |
| Type                | Relational          | Relational       | KV Store        | Document     | Document       | Document       |
| Free Tier           | ð¢                  | ð¢               | ð¢              | ð¢           | ð¢             | ð¢             |
| Serverless Pricing  | ð¡ (min $29)        | ð¡ (min $25)     | ð¢              | ð¡ (min $22.5)| ð¢             | ð¢             |
| REST API            | ð´                 | ð¢               | ð¢              | ð¢           | ð¢             | ð¢             |
| GraphQL API         | ð´                 | ð´               | ð´              | ð¢           | ð´             | ð´             |
| Global replication  | ð´                 | ð´               | ð¢              | ð¢           | ð¢             | ð¡ (only for Dedicated) |
| Database Branching  | ð¢                 | ð´               | ð´              | ð´           | ð´             | ð´             |
| Realtime Updates    | ð´                 | ð¢               | ð´              | ð´           | ð¢             | ð¡ (via Realm) |
| Price Reads         | $1.5 / 10m         | $0.09 / GB       | $0.2 / 100K     | $0.45 / 1m (4KB) | $0.25 / 1m (2KB) | $0.3 / 1m (4KB) |
| Price Writes        | $1.5 / 1m          | $0.09 / GB       | $0.2 / 100K     | $2.25 / 1m (1KB) | $1.25 / 1m (1KB) | $1.25 / 1m (1KB) |
| Price Storage       | $1.25 / GB          | $0.125 / GB      | $0.25 / GB      | $0.23 / GB     | $0.25 / GB      | $0.25 / GB      |

</FullWidth>

## PlanetScale

- [PlanetScale](https://planetscale.com/) is a MySQL-compatible database as a service.
- It uses [Vitess](https://vitess.io/) in the background. This is great as Vitess is being actively used by giants like YouTube.
- PlanetScale introduced the [database branching](https://docs.planetscale.com/concepts/branching) concept. You can create branches and merge schema changes to your production database just like git. As far as I know, this feature is unique to PlanetScale.
- It has a free tier with 100m reads per month.
- Paid plans start from $29. The main price components for the paid plan are:
  - Storage/month: $1.25/GB after the first 25GB
  - Reads/month: $1.50 per 10m, after the first 500m
  - Writes/month: $1.50 per 1m, after the first 50m
- PlanetScale does not have an HTTP/REST-based API.

![db](/blog/nextjsdbs/n1.png)

#### My Comments:

- On the homepage, it is said that: Trusted By GitHub, Square, Slack etc. Do these companies use PlanetScale or Vitess? If these companies use PlanetScale then it is great. Otherwise, I do not feel good about this type of marketing. Trusting Vitess and trusting PlanetScale are different things.
- PlanetScale requires you to use TCP-based connections (MySQL connections). This might be a problem for serverless functions as they are stateless. They say the number of connections is not a problem for Vitess, but still, there is a max connection limit for the plans.
- The lack of an HTTP/REST API makes it impossible to use PlanetScale from Cloudflare Workers and Vercel Edge platforms because they do not allow TCP connections.
- PlanetScale paid plans start from $29, so the price does not scale to zero. Even if you are not using a DB, you have to pay at least $29 per db. I think this is a conflict with the definition of `serverless`.

#### Useful Links:

- [Detailed pricing](https://docs.planetscale.com/concepts/billing#planetscale-plans)
- [Tutorial using PlanetScale with Next.js and Prisma](https://planetscale.com/blog/how-to-setup-next-js-with-prisma-and-planetscale)
- [Video tutorial using PlanetScale and Next.js, then deploying to Vercel](https://www.youtube.com/watch?v=YqBG5rFP4Ic)
- [Hackernews comments on PlanetScale launch](https://news.ycombinator.com/item?id=27197873)

## Supabase

- Supabase is a collection of developer tools including a database, authentication service, and storage. They call themselves an `Open Source Firebase Alternative`.
- Supabase provides a PostgreSQL database.
- Just like Firebase, Supabase enables developers to listen to the changes in the database in real-time.
- Supabase provides a RESTful API using PostgREST. This is especially useful if you plan to use Supabase in serverless functions.
- Supabase can be used in Cloudflare Workers thanks to its REST API. Check [this.](https://github.com/supabase/supabase/tree/master/examples/with-cloudflare-workers)
- The Supabase free tier is limited to 500MB of storage and 2GB of data transfer monthly.
- Similar to PlanetScale, Supabase has a minimum cost for paid databases, which is $25/month. A summary of pay-as-you-go pricing:
  - Storage: $0.125 per GB-month
  - Data transfer: $0.09 per GB

![db](/blog/nextjsdbs/n2.jpeg)

#### My Comments:

- Supabase provides a database, authentication service, and object storage, and `serverless functions` are coming soon. I am worried that it may be hard for a startup to provide many services with high quality and compete with Firebase backed by Google. I hope they will be successful.
- Just like PlanetScale, I think their pricing is not truly serverless. Their paid plans require a fixed monthly cost so it never scales to zero.

#### Useful Links:

- [Detailed pricing](https://supabase.com/pricing)
- [Get started with Next.js](https://supabase.com/docs/guides/with-nextjs)
- [Video: Supabase Crash Course](https://www.youtube.com/watch?v=7uKQBl9uZ00)
- [Video tutorial: Supabase with Next.js](https://www.youtube.com/watch?v=p561ogKZ63o)

## Upstash Redis

- Upstash provides Redis as a service with per-request pricing.
- It provides both Redis and REST API. So you can use it with both serverless and edge (Cloudflare Workers) functions.
- Upstash has regional and global options. The global database replicates data to multiple regions.
- It has a free tier with a maximum of 10,000 commands per day. Its pay-as-you-go pricing is as follows:
  - Commands: $0.2 per 100K commands
  - Storage: $0.25 per GB

![db](/blog/nextjsdbs/n3.png)

#### My Comments:

- Both we (Upstash) and [RedisLabs](https://redis.com/) think that Redis is powerful enough for many use cases in addition to classic Redis use cases (caching, kv-store). But I still see many developers prefer SQL databases as the primary data store. If you need complex query capabilities, Redis may not be your first choice.

#### Useful Links:

- [Detailed pricing](/docs/redis/overall/pricing)
- [Get started with Next.js and Redis](/docs/redis/tutorials/nextjs_with_redis)
- [Getting started with Next.js Edge Functions](https://blog.upstash.com/getstarted-nextjs-edge-with-redis)
- [Video: Using Serverless Redis with Next.js](https://www.youtube.com/watch?v=FytxaSVQROc)

## Fauna

- Fauna provides a Globally Replicated Strongly Consistent database as a cloud service.
- It provides a GraphQL API in addition to the Fauna API.
- Its connections are HTTP-based, so you can use Fauna in serverless functions without any connection-related problems.
- Its most basic plan (Individual) starts from $22.5/month.
- Fauna pricing:
  - Reads: $0.45 per million units (4KB)
  - Writes: $2.25 per million units (1KB)
  - Storage: $0.23 per GB

![db](/blog/nextjsdbs/n4.png)

#### My Comments: 

- Global strong consistency comes with extra performance costs. Writes have higher latencies than other alternative databases.
- If you will use GraphQL, then itâs great, but otherwise, FQL was hard for me to learn and use.
- Fauna pricing has its own units (TRO, TWO, TCO) and many dimensions. You need to read articles to understand the pricing.

#### Useful Links:

- [Pricing Page](https://fauna.com/pricing)
- [Using Next.js with Fauna and GraphQL](https://fauna.com/blog/using-next-js-with-fauna-and-graphql)
- [Video: Using Next.js with Fauna](https://www.youtube.com/watch?v=cCD62m6yIXk)

## MongoDB Atlas

- Atlas is a MongoDB as a managed service that has serverless, shared, and dedicated plans.
- The Data (REST) API has recently been [announced](https://docs.atlas.mongodb.com/api/data-api/). This allows you to access your database using HTTP.
- MongoDB Atlas has a Serverless plan with [some limitations](https://docs.atlas.mongodb.com/reference/serverless-instance-limitations/). The pricing of this plan is per operations, so it scales to zero as expected from a serverless product.
- Multi-region replication is only available with the Dedicated plan.
- Serverless Pricing:
  - Reads: $0.30 per million units (4KB)
  - Writes: $1.25 per million units (1KB)
  - Storage: $0.25 per GB-month

![db](/blog/nextjsdbs/n5.png)

#### My Comments:

- The Serverless Plan and Data API show that MongoDB Atlas does not ignore the Serverless space. But both solutions are in the preview phase and need some improvements to be an ideal data solution for serverless applications.

#### Useful Links:

- [Pricing Page](https://www.mongodb.com/pricing)
- [How to Integrate MongoDB into a Next.js App](https://www.mongodb.com/developer/how-to/nextjs-with-mongodb/)
- [Video: Integrating MongoDB into Your NextJS App](https://www.youtube.com/watch?v=aAupumVpqcE)

## DynamoDB

- Fully managed NoSQL database with key-value and document data models.
- The connections are HTTP-based, so it fits serverless applications.
- Pricing is per operation in addition to data transfer cost. So it scales to zero.
- By default, the reads are eventually consistent. You can also request strongly consistent reads but it has some [limitations](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.ReadConsistency.html).
- You can enable multi-region replication at an extra cost.
- The pricing:
  - Reads: $0.25 per million read request units (2KB)
  - Writes: $1.25 per million write request units (1KB)
  - Data transfer (out): $0.09 per GB
  - Storage: $0.25 per GB-month

![db](/blog/nextjsdbs/n6.png)

#### My Comments:

- For me, the DynamoDB API is not as intuitive as Redis or MongoDB.
- There is a vendor lock-in problem. DynamoDB is only at AWS, and you cannot move your application to another provider without changing the code.

#### Useful Links:

- [Pricing Page](https://aws.amazon.com/dynamodb/pricing/on-demand/)
- [Example App: Next.js with DynamoDB](https://github.com/leerob/nextjs-aws-dynamodb)
- [Video Course: Next.js with DynamoDB](https://egghead.io/courses/using-dynamodb-with-next-js-b40c)

## Conclusion

So, what is the best database for Next.js? As expected, there is no single answer. But let's give some conditional answers:

- If you need a relational DB ðð» Supabase or PlanetScale
- If you need database branching ðð» PlanetScale
- If you need real-time updates ðð» Supabase or MongoDB Atlas
- If you need global low latency ðð» Upstash or DynamoDB
- If you need global strong consistency ðð» Fauna
- If you need low latency key-value store ðð» Upstash
- If you love PostgreSQL ðð» Supabase
- If you love MySQL ðð» PlanetScale
- If you love Redis ðð» Upstash
- If you love Mongo ðð» MongoDB Atlas
- If you need GraphQL ðð» Fauna

I tried to be fair and correct. If you think there is something I need to fix, please drop your comments on my [Twitter](https://twitter.com/enesakar)